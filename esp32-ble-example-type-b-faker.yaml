<<: !include esp32-ble-example-type-b-debug.yaml

ogt_bms_ble:
  - ble_client_id: client0
    id: bms0
    update_interval: 60s
    ble_name: SmartBat-B12294

interval:
  - interval: 30s
    then:
      # Total Voltage: +RD,09xxxx (9: 0x09, Total voltage data)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x20, 0x29, 0x27, 0x24, 0x52, 0x22, 0x1D, 0x1A
          });

      - delay: 1s

      # Capacity Remaining: +RD,0Fxxxxxx (15: 0x0F, Remaining capacity with scale)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x20, 0x56, 0x22, 0x20, 0x20, 0x23, 0x20, 0x51, 0x1D, 0x1A
          });

      - delay: 1s

      # Full Charge Capacity: +RD,10xxxxxx (16: 0x10, Full charge capacity with scale)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x21, 0x20, 0x54, 0x22, 0x20, 0x24, 0x20, 0x51, 0x1D, 0x1A
          });

      - delay: 1s

      # Time to Empty: +RD,12xxxx (18: 0x12, Time to empty in minutes)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x21, 0x22, 0x27, 0x28, 0x20, 0x20, 0x1D, 0x1A
          });

      - delay: 1s

      # Time to Full: +RD,13xxxx (19: 0x13, Time to full in minutes)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x21, 0x23, 0x52, 0x24, 0x20, 0x20, 0x1D, 0x1A
          });

      - delay: 1s

      # Cycles: +RD,17xxxx (23: 0x17, Charge cycles count)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x21, 0x27, 0x26, 0x23, 0x20, 0x20, 0x1D, 0x1A
          });

      - delay: 1s

      # Design Capacity: +RD,18xxxxxx (24: 0x18, Design capacity with scale)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x21, 0x28, 0x52, 0x20, 0x20, 0x24, 0x20, 0x51, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 01: +RD,3Exxxx (62: 0x3E, Cell 1 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x55, 0x27, 0x51, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 02: +RD,3Dxxxx (61: 0x3D, Cell 2 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x54, 0x27, 0x20, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 03: +RD,3Cxxxx (60: 0x3C, Cell 3 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x53, 0x26, 0x26, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 04: +RD,3Bxxxx (59: 0x3B, Cell 4 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x52, 0x25, 0x53, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 05: +RD,3Axxxx (58: 0x3A, Cell 5 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x51, 0x25, 0x22, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 06: +RD,39xxxx (57: 0x39, Cell 6 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x29, 0x24, 0x28, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 07: +RD,38xxxx (56: 0x38, Cell 7 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x28, 0x23, 0x55, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 08: +RD,37xxxx (55: 0x37, Cell 8 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x27, 0x23, 0x24, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 09: +RD,36xxxx (54: 0x36, Cell 9 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x26, 0x22, 0x51, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 10: +RD,35xxxx (53: 0x35, Cell 10 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x25, 0x22, 0x20, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 11: +RD,34xxxx (52: 0x34, Cell 11 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x24, 0x21, 0x26, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 12: +RD,33xxxx (51: 0x33, Cell 12 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x23, 0x20, 0x53, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 13: +RD,32xxxx (50: 0x32, Cell 13 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x22, 0x20, 0x22, 0x20, 0x54, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 14: +RD,31xxxx (49: 0x31, Cell 14 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x21, 0x56, 0x28, 0x20, 0x53, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 15: +RD,30xxxx (48: 0x30, Cell 15 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x23, 0x20, 0x55, 0x55, 0x20, 0x53, 0x1D, 0x1A
          });

      - delay: 1s

      # Cell Voltage 16: +RD,2Fxxxx (47: 0x2F, Cell 16 voltage)
      - lambda: |-
          id(bms0).on_ogt_bms_ble_data({
            0x3B, 0x42, 0x54, 0x3C, 0x22, 0x56, 0x55, 0x24, 0x20, 0x53, 0x1D, 0x1A
          });
